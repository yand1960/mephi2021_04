<html>
    <head>
        <meta charset="utf-8" />
        <style>
            td {
                padding: 10px;
            }

            table input {
                width: 50px;
            }
        </style>
        <script>
            async function getProducts() {
                var url = "api/product_service.php";
                var request = await fetch(url);
                var products = await request.json();
                console.log(products);
                out = "<table>"
                for(var i=0; i < products.length; i++) {
                    var id = products[i][0];
                    var name = products[i][1];
                    var price = products[i][2];
                    console.log(name)
                    out += `
                    <tr>
                        <td>${name}</td>
                        <td>${price}</td>
                        <td>
                            <input type="number" value="0" id='qty${id}'>
                        </td>
                        <td>
                            <button onclick='addToCart(${id});'>Добавить в корзину</button>
                        </td>
                    </tr>
                    `;
                }
                out += "</table>"
                document.getElementById("display").innerHTML = out;
            }

            async function addToCart(id) {
                var qty = document.getElementById(`qty${id}`).value;
                var url = `api/add_product_to_cart.php?id=${id}&qty=${qty}`;
                console.log(url);
                var request = await fetch(url);
                var result = await request.json();
                alert("Товар успешно добавлен в корзину!");
                console.log(result);
            }
        </script>

    </head>

    <body onload="getProducts();">
        <h1>Делайте ваши покупки!</h1>
        <div id="display">
            <table>
               
            </table>
        </div>
    </body>
</html>